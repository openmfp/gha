name: "Update License Metadata"

on:
  workflow_call:
    secrets:
      # This access token requires inter-repository access, so it cannot be the default GITHUB_TOKEN
      GH_ACCESS_TOKEN:
        required: true

jobs:
  create_metadata_proposal:
    runs-on: ubuntu-latest
    name: "Metadata Creation Tool"
    steps:
      - uses: SAP/metadata-creation-tool-for-reuse@main
        with:
          repository_url: "${{ github.server_url }}/${{ github.repository }}"
          access_token: "${{ secrets.GH_ACCESS_TOKEN }}"
          copyright_owner: "(20xx-)20xx SAP SE or an SAP affiliate company and openMFP contributors"
          upstream_contact: ""
      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v3
        with:
          token: ${{ secrets.GH_ACCESS_TOKEN }}
          commit-message: "Update from source branch"
          title: "Update from source branch"
          body: "This PR was auto-generated to merge changes from source branch to main."
          branch: reuse-metadata-proposal
          base: "main"
          delete-branch: true
          draft: false